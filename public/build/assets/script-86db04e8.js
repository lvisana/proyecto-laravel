let r="http://proyecto-laravel.test/";window.addEventListener("DOMContentLoaded",function(){if(document.querySelectorAll(".like-btn")){let l=document.querySelectorAll(".like-btn");const d=(i,n)=>{fetch(r+"like/save/"+i).then(function(e){return e.json()}).then(function(){fetch(r+"image/likecount/"+i).then(function(e){return e.json()}).then(function(e){if(Number(e.count)>=0&&document.querySelector(`[data-id="${n}"] > span`))if(document.querySelector(`[data-id="${n}"] > span`).textContent=e.count,Array(e.users)&&e.users.length>0){let t="";e.users.forEach(a=>{t+=`
                                            <li class="d-flex align-items-center gap-1 mb-2 border-bottom pb-1">
                                                <div style="background-image: url('`,a.image?t+=`${r}profile/avatar/${a.image}`:t+=`${r}img/default-avatar.jpg`,t+=`'); background-repeat: no-repeat; background-size: cover; background-position: center; width: 30px; height: 30px; border-radius: 100%;"></div>
                                                    <p>${a.name} ${a.surname}</p>
                                                </li>`}),document.querySelector(`[data-id="${n}"] > div > ul`)?document.querySelector(`[data-id="${n}"] > div > ul`).innerHTML=t:(t=`<ul class="d-none rounded text-dark py-2 px-4">
                                                ${t}
                                                </ul
                                                `,document.querySelector(`[data-id="${n}"] > div`).innerHTML=t)}else e.users.length==0&&document.querySelector(`[data-id="${n}"] > div > ul`).remove()})})};l.forEach(i=>{i.addEventListener("click",function(n){let e=n.target.id,t=n.target.nextElementSibling.dataset.id;i.classList.contains("btn-liked")?(i.setAttribute("src",r+"img/light-heart.png"),i.classList.remove("btn-liked"),d(e,t)):(i.setAttribute("src",r+"img/red-heart.png"),i.classList.add("btn-liked"),d(e,t))})})}});
